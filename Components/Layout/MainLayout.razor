@inherits LayoutComponentBase
@inject ThemeService Theme
@implements IDisposable

<div class="shell @Theme.GetThemeClass()">
	<aside class="side">
		<NavMenu />
	</aside>
	<main class="main">
		<div class="wrap">
			@Body
		</div>
	</main>
</div>

@code {
	protected override async Task OnAfterRenderAsync(bool firstRender)
	{
		if (firstRender)
		{
			await Theme.InitializeTheme();
			StateHasChanged();
		}
	}

	protected override void OnInitialized() => Theme.OnThemeChanged += Paint;

	private void Paint() => InvokeAsync(StateHasChanged);

	public void Dispose() => Theme.OnThemeChanged -= Paint;
}
